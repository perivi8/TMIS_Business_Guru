<mat-toolbar color="primary" class="navbar">
  <div class="nav-container">
    <a routerLink="/" class="nav-brand">
      <mat-icon>business</mat-icon>
      TMIS Business Guru
    </a>

    <div class="nav-menu" *ngIf="currentUser">
      <!-- Admin Navigation -->
      <ng-container *ngIf="isAdmin()">
        <a routerLink="/admin-dashboard" routerLinkActive="active" class="nav-link">
          <mat-icon>dashboard</mat-icon>
          Home
        </a>
        <a routerLink="/clients" routerLinkActive="active" class="nav-link">
          <mat-icon>people</mat-icon>
          Clients
        </a>
        <a routerLink="/enquiry" routerLinkActive="active" class="nav-link">
          <mat-icon>assignment</mat-icon>
          Enquiry
        </a>
        <a routerLink="/contact-us" routerLinkActive="active" class="nav-link">
          <mat-icon>contact_mail</mat-icon>
          Contact Us
        </a>
        <button mat-icon-button class="nav-link notifications-button" (click)="toggleNotifications()" [class.has-notifications]="hasUnreadNotifications" matTooltip="Notifications">
          <mat-icon [class.shake]="hasUnreadNotifications">notifications</mat-icon>
          <span class="notification-count" *ngIf="getNotificationCount() > 0">{{ getNotificationCount() }}</span>
        </button>
      </ng-container>

      <!-- User Navigation -->
      <ng-container *ngIf="!isAdmin()">
        <a routerLink="/dashboard" routerLinkActive="active" class="nav-link">
          <mat-icon>home</mat-icon>
          Home
        </a>
        <a routerLink="/team" routerLinkActive="active" class="nav-link">
          <mat-icon>group</mat-icon>
          Team
        </a>
        <a routerLink="/clients" routerLinkActive="active" class="nav-link">
          <mat-icon>people</mat-icon>
          Clients
        </a>
        <a routerLink="/enquiry" routerLinkActive="active" class="nav-link">
          <mat-icon>assignment</mat-icon>
          Enquiry
        </a>
        <a routerLink="/new-client" routerLinkActive="active" class="nav-link">
          <mat-icon>person_add</mat-icon>
          New Client
        </a>
        <a routerLink="/contact-us" routerLinkActive="active" class="nav-link">
          <mat-icon>contact_mail</mat-icon>
          Contact Us
        </a>
        <button mat-icon-button class="nav-link notifications-button" (click)="toggleNotifications()" [class.has-notifications]="hasUnreadNotifications" matTooltip="Notifications">
          <mat-icon [class.shake]="hasUnreadNotifications">notifications</mat-icon>
          <span class="notification-count" *ngIf="getNotificationCount() > 0">{{ getNotificationCount() }}</span>
        </button>
      </ng-container>

      <!-- User Menu -->
      <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-menu-button">
        <mat-icon>account_circle</mat-icon>
      </button>
      <mat-menu #userMenu="matMenu">
        <div class="user-info">
          <p><strong>{{ currentUser && currentUser.username }}</strong></p>
          <p>{{ currentUser && currentUser.email }}</p>
          <p><span class="role-badge" [ngClass]="currentUser && currentUser.role">{{ currentUser && currentUser.role }}</span></p>
        </div>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          Logout
        </button>
      </mat-menu>
    </div> <!-- Close nav-menu -->
  </div> <!-- Close nav-container -->
</mat-toolbar>
